# Year 3 Project â€“ Distributed Shared-Buffer (DSB) NoC Router

This repository contains the implementation of my **Year 3 project (DSB NoC Router)** titled  
**â€œDesign of Distributed Shared-Buffer Network-on-Chip (NoC) Router.â€**  
The goal is to design, implement and evaluate a 3-stage pipelined DSB router for a 2D-mesh NoC, compare its latency and throughput against a traditional input-buffered router (IBR), and synthesize the design in a 130 nm flow.

## ğŸ”¹ Key Features (implemented)

- 3-stage pipelined router (natural 3-stage pipeline).  
- Xâ€“Y routing in a 2D-mesh network.  
- Input buffers combined with distributed shared middle memories (MMs).  
- Middle memories are FIFO; priority scheme for MM selection with circular priority adjustment to reduce starvation.  
- 5 input ports, 5 middle memories; each buffer/MM holds 8 data entries (configurable in RTL).

## ğŸ§© Design & Implementation (overview)

The router follows a reference architecture with simplifications for practical implementation:

- Each incoming packet is timestamped and decoded to determine destination and tentative output time.  
- Stage consolidation: CR+VA and XB1+MM_WR are merged; MM_RD+XB2 and LT are merged to simplify the pipeline stages and reduce control complexity.  
- Arrival conflicts (multiple inputs wanting the same MM in the same cycle) are handled during Stage 2 arbitration;
- Departure conflicts (multiple MMs wanting the same output) are handled in Stage 3 with a switch/arbiter structure.

## ğŸš¦ 3-Stage Pipeline (detailed)

### Stage 1 â€” Input / Decode / Input Buffering
- Accepts incoming flow-control units, responds with ack, stores data in input FIFOs, decodes destination and appends timestamp.

### Stage 2 â€” Arbiter / Inputâ†’Middle Memory (XB1 + MM_WR)
- Arbitration decides which input goes to which MM, resolves arrival conflicts, and writes granted flits into selected MMs via a 5Ã—N switch. MM occupancy bitmaps and fixed/circular priority logic are used for selection.

### Stage 3 â€” Middle Memoryâ†’Output (MM_RD + XB2 + Output Link)
- MMs propose candidates for output arbitration; XB2 arbitration and output link control resolve departure conflicts and drive the output link when permitted by downstream flow-control.

## ğŸ§ª Experiments & Results

- **Single-router tests:** Verified correct routing and arbitration for flows arriving from different directions (including local port). Input patterns are generated by a preprocessing tool that converts human-editable `.txt` patterns into `.dat` files consumed by the Verilog testbench.  
- **2Ã—2 Mesh simulation:** Compared a network built from traditional 3-stage IBR routers vs. the implemented DSB routers. Observed that the DSB router yields lower average packet delay under many multi-directional traffic patterns due to more flexible internal buffering and allocation.

## ğŸ› ï¸ Synthesis / Implementation Results

- The design was targeted for synthesis with a TSMC 130 nm flow at a 10 ns clock period. Reports for area and timing summaries are included in the project artifacts.

## ğŸ“ Repository Layout (where to look)

Top-level folders (example):

- `2_dsb_router/` â€” Verilog modules for the DSB router implementation.  
- `2_dsb_mesh/`   â€” Verilog modules for the 2x2 2D mesh implementation.   
- `0_DATA/`, `0_MESH_DATA/` â€” Using C++ to generate data use in 2_dsb_router and 2_dsb_mesh  


## ğŸ“š References

1. R. S. Ramanujam, V. Soteriou, B. Lin, and L.-S. Peh, â€œDesign of a High-Throughput Distributed Shared-Buffer NoC Router,â€ Proc. 4th ACM/IEEE Int. Symp. Networks-on-Chip (NoCs), Grenoble, France, May 3â€“6, 2010..

